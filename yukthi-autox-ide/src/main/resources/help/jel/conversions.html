<html>
<head>
	<style>
		.blue-highlight
		{
			font-weight: bold;
			color: blue;
		}
		
		.simple-blue
		{
			color: blue;
		}

		.example-box
		{
			margin: 20px;
			border: 1px solid rgb(200, 200, 200);
			width: 75%;
		}
		
		.example-heading
		{
			padding: 10px;
			font-weight: bold;
			background-color: rgb(200, 200, 200);			
		}

		.example-body
		{
			padding: 5px;
			white-space: pre;
		}

		.example-desc
		{
			padding: 5px;
		}
	</style>
</head>

<body>
	<h3>Conversion</h3>

	<p>
		Following special conversions are supported when standard json representation is not enough.
		
		<ul>
			<li>
				<b>Json Conversion</b>: Cases when a value (can be list or complex object) has to be represented in json string format (escaped string value)
				then <span class="simple-blue">@json</span> in conjunction with <span class="simple-blue">@value</span> or <span class="simple-blue">@falseValue</span> 
				can be used as explained in below examples.
			</li>
			<li>
				<b>Resource Loading</b>: When complex content (which cannot be included in json easily like mulit-line content etc), the content itself
				can be externalized in a resource file and can be loaded wherever approp. The resource loading supports below parameters:
				<ul>
					<li>
						<span class="blue-highlight">@remove-ws</span> - Removes white-spaces from the loaded content. Defaults to false.
					</li>
					<li>
						<span class="blue-highlight">@expressions</span> - Used to enable or disable free-marker expressions in loaded content. Defaults to true.
					</li>
					<li>
						<span class="blue-highlight">@resParams</span> - Value specified under this will be accessible in the fmarker expressions inside the content as 
						"resParams" along with current context. By default this will not be available on context.
					</li>
				</ul>
			</li>
		</ul>
	</p>

	<div class="example-box">
		<div class="example-heading">
			In Conjunction with @value
		</div>
		<div class="example-body">
		<pre>
		{
			"result": {
				"<span class="simple-blue">@json</span>": "true",
				
				"<span class="simple-blue">@value</span>": {
					"someVal": 1,
					"containers": "@fmarker: containers"
				}
			}
		}
		</pre>
		</div>
		<div class="example-desc">
			<p>
				The result will be something like below:
				<pre>
		{
			"result": "{\"someVal\":1,\"containers\":[\"bank\",\"card\",\"insurance\"]}"
		}
				</pre>
			</p>
		</div>
	</div>

	<div class="example-box">
		<div class="example-heading">
			In Conjunction with @condition and @falseValue
		</div>
		<div class="example-body">
		<pre>
		{
			"result": {
				"<span class="simple-blue">@condition</span>": "flag == 1",
				"<span class="simple-blue">@json</span>": "true",
				
				"<span class="simple-blue">@falseValue</span>": {
					"someVal": 1,
					"containers": "@fmarker: containers"
				}
			}
		}
		</pre>
		</div>
		<div class="example-desc">
			<p>
				In this example, if condition results in false then the value represented by 
				<span class="simple-blue">@falseValue</span> will be converted into json string as shown above.
			</p>
		</div>
	</div>

	<div class="example-box">
		<div class="example-heading">
			Loading resource content
		</div>
		<div class="example-body">
		<pre>
		{
			"result": {
				"<span class="simple-blue">@resource</span>": "/res-file.txt",
				"<span class="simple-blue">@remove-ws</span>": true,
				"<span class="simple-blue">@expressions</span>": false,
				"<span class="simple-blue">@resParams</span>": {
					"key1": "val1"
				}
			}
		}
		</pre>
		</div>
		<div class="example-desc">
			<p>
				In above example, "/res-file.txt" will be loaded and the "result" attribute value will be 
				replaced with the content of the resource.
			</p>
		</div>
	</div>

</body>
</html>