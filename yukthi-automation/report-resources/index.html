<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
	    <meta http-equiv="X-UA-Compatible" content="IE=edge">
	    <meta name="viewport" content="width=device-width, initial-scale=1">
	    
		<title>Test Results</title>
		
		<style>
			table
			{
				width: 100%; 
				height: 100%;
			}
			
			tr > th
			{
				background-color: #484848;
				font-weight: bold;
				font-size: 1.1em;
				text-align: center;
				color: white;
			}

			td
			{
				text-align: center;
			}
			
			.successVal
			{
				font-weight: bold;
				color: #6666ff;
			}
			
			.errorVal
			{
				font-weight: bold;
				color: red;
			}
			
			.defaultVal
			{
				font-weight: bold;
				color: brown;
			}
			.resultBox
			{
				margin: 1em;
				margin-bottom: 2em;
			}
		</style>
		
		<link href="css/bootstrap.min.css" rel="stylesheet">
		
		<script type="text/javascript" src="test-results.js"></script>
		
		<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
	    <script src="js/jquery-2.2.0.js"></script>
	    
	    <!-- Include all compiled plugins (below), or include individual files as needed -->
	    <script src="js/bootstrap.min.js"></script>
	    
		<script src="js/angular.js"></script>
		
		<script src="js/index.js"></script>
	</head>
	
	<body ng-app="testAutomationApp" ng-controller="testAutomationAppController" ng-init="fetchObjects()">
		
		<div style="margin: 0; padding: 0; position: fixed; top: 0; width: 100%; height: 4em; background-color: white;
				border-bottom: 2px solid grey;">
			<table style="width: 100%;">
				<tr>
					<td style="width: 10%;">
						<img alt="Yukthi Logo" src="">
					</td>
					<td style="width: 38%;">
						aaa
					</td>
					<td style="width: 15%;">
						<div>
							<input type="text" ng-model="searchTestSuiteName" class="form-control" placeholder="Test Suite Name"
							ng-keyup="filterTestSuite($event)"/>
						</div>
					</td>
					<td style="width: 15%;">
						<div style="margin-left: 0.6em;">
							<input type="text" ng-model="searchTestCaseName" class="form-control" placeholder="Test Case Name"
							ng-keyup="filterTestCase($event)"/>
						</div>
					</td>
					<td style="width: 22%;">
						<div class="btn-group">
							<button type="button" class="btn btn-primary" style="max-width: 10em; min-width: 10em; cursor: default;">
								Test Case Status 
							</button>
						    
						    <button type="button" class="btn btn-primary" style="max-width: 7em; min-width: 7em; cursor: default;">
						    	{{status}}
						    </button>
						    
						    <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown">
						      <span class="caret"></span>
						    </button>
						    <ul class="dropdown-menu" role="menu">
						       <li><a href="#" ng-click="onChangeStatus('All')">All</a></li>
						      <li><a href="#" ng-click="onChangeStatus('Success')">Success</a></li>
						      <li><a href="#" ng-click="onChangeStatus('Error')">Error</a></li>
						      <li><a href="#" ng-click="onChangeStatus('Failed')">Failed</a></li>
						      <li><a href="#" ng-click="onChangeStatus('Skipped')">Skipped</a></li>
						    </ul>
						</div>
					</td>
				</tr>
			</table>
		</div>
		
		<div class="resultBox" style="margin-top: 5em;">
		
			<table>
				<tr>
					<td>
						<div style="border-right: 3px solid white;">
							
							<table class="table table-hover table-striped table-bordered">
								<tr>
									<td colspan="6" style="background-color: #8585ad; font-weight: bold; font-size: 1.1em; color: black;">
									Test Suites
									</td>
								</tr>
								<tr>
									<th>Total Test Suites</th>
									<th>Success Count</th>
									<th>Failure Count</th>
									<th>Skip Count</th>
									<th>Set up Success</th>
									<th>Clean up Success</th>
								</tr>
								<tr>
									<td class="defaultVal">{{testResults.testSuiteCount}}</td>
									<td class="successVal">{{testResults.testSuiteSuccessCount}}</td>
									<td class="errorVal">{{testResults.testSuiteFailureCount}}</td>
									<td class="errorVal">{{testResults.testSuiteSkippedCount}}</td>
									<td ng-class="testResults.setupSuccessful ? 'successVal' : 'errorVal'">{{testResults.setupSuccessful}}</td>
									<td ng-class="testResults.cleanupSuccessful ? 'successVal' : 'errorVal'">{{testResults.cleanupSuccessful}}</td>
								</tr>
							</table>
						</div>
					</td>
					<td>
						<div>
							
							<table class="table table-hover table-striped table-bordered">
								<tr>
									<td colspan="6" style="background-color: #8585ad; font-weight: bold; font-size: 1.1em; color: black;">
									Test Cases
									</td>
								</tr>
								<tr>
									<th>Total Test Cases</th>
									<th>Success Count</th>
									<th>Failure Count</th>
									<th>Skip Count</th>
								</tr>
								<tr>
									<td class="defaultVal">{{testResults.testCaseCount}}</td>
									<td class="successVal">{{testResults.testCaseSuccessCount}}</td>
									<td class="errorVal">{{testResults.testCaseFailureCount}}</td>
									<td class="errorVal">{{testResults.testCaseSkippedCount}}</td>
								</tr>
							</table>
						</div>
					</td>
				</tr>
			</table>
		</div>
		
		<div class="resultBox">
			<table class="table table-hover table-striped table-bordered">
				<tr>
					<th style="width: 20%;">Test Suite</th>
					<th style="width: 15%;">Status</th>
					<th style="width: 24%;">Message</th>
					<th style="width: 11%;">Success Count</th>
					<th style="width: 10%;">Failure Count</th>
					<th style="width: 10%;">Error Count</th>
					<th style="width: 10%;">Skip Count</th>
				</tr>
				<tr ng-repeat="result in testSuiteResults" ng-show="result.display">
					<td class="defaultVal">
						<a href="#result.suiteName">{{result.suiteName}}</a>
					</td>
					<td ng-class="result.failureCount > 0 ? 'errorVal' : 'successVal'">
						{{result.status}}	
					</td>
					<td>
						{{result.message}}
					</td>
					<td class="successVal">
						{{result.successCount}}	
					</td>
					<td class="errorVal">
						{{result.failureCount}}	
					</td>
					<td class="errorVal">
						{{result.errorCount}}	
					</td>
					<td class="errorVal">
						{{result.skipCount}}
					</td>
				</tr>
			</table>
		</div>
		
		<div id="result.suiteName" class="resultBox" ng-repeat="result in testResultsArr" ng-show="result.display">
			<table class="table table-hover table-striped table-bordered" style="width: 100%;">
				<tr>
					<td colspan="5" style="background-color: #8585ad; font-weight: bold; color: black;">
							{{result.suiteName}}
					</td>
				</tr>
				<tr>
					<th>Test Case</th>
					<th>Status</th>
					<th>Message</th>
					<th>Log</th>
				</tr>
				<tr ng-repeat="suiteResult in result.testCaseResults" ng-show="suiteResult.display">
					<td style="color: #3973ac; font-weight: bold;" style="width: 20%;">
						{{suiteResult.testCaseName}}
					</td>
					<td ng-class="suiteResult.status == 'FAILED' ? 'errorVal' : 'successVal'" style="width: 20%;">
						{{suiteResult.status}}
					</td>
					<td style="width: 50%;">
						{{suiteResult.message}}
					</td>
					<td style="width: 10%;">
						<a href="./log.html?{{result.suiteName}}_{{suiteResult.testCaseName}}" target="_blank">Log</a>
						
						<a href="logs/{{suiteResult.monitorLogs['client-output']}}" target="_blank"
							style="color: brown;">
							Monitor
						</a>
					</td>
				</tr>
			</table>
		</div>
		
	</body>
</html>