<!DOCTYPE html>
<html lang="en">
	<head>
		<title>AutoX Api Documentation</title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		
		<script type="text/javascript" src="jquery/jquery-3.4.1.min.js"></script>
		<script type="text/javascript" src="bootstrap-3.4.1/js/bootstrap.min.js"></script>

		<link rel="stylesheet" href="docs.css">
		<link rel="stylesheet" href="bootstrap-3.4.1/css/bootstrap.min.css">
		<link rel="stylesheet" href="font-awesome-5.12.1/css/all.min.css">		
		

		<script>
			$(document).ready(function(){
				var winHeight = $(window).height();
				var y = $("#myScrollspy").position().top;
				
				var h = winHeight - (3 * y);
				
				$("#myScrollspy").height( h );
				$("#myScrollspy").width( $($("#myScrollspy").parent()).width() );

				$('#myScrollspy').on('activate.bs.scrollspy', function () {
					var lastActiv = $("#myScrollspy li.active").last();
					lastActiv = $(lastActiv);
					
					var activY = lastActiv.position().top;
					var scrollY = $("#myScrollspy").position().top;
					
					var midPos = scrollY + ($("#myScrollspy").height() / 2);
					
					var toScroll = activY - midPos;
					$("#myScrollspy").scrollTop(toScroll);
				});
			});
			
		</script>

	</head>

	<body data-spy="scroll" data-target="#myScrollspy" data-offset="40">
		<div class="container" style="margin-top: 20px; padding: 0px; width: 100%;">
			<div class="row" style="margin: 0px;">
				<div class="col-md-3 col-lg-2">
					<div id="myScrollspy" class="bs-docs-sidebar" style="position: fixed; overflow: auto;">
						<ul class="nav nav-stacked" data-offset-top="10" style="position: initial;">
							<li>
								<a href="#steps">Steps and Assertions</a>
								
								<ul class="nav nav-stacked" style="margin-left: 10px">
									<#list activePlugins as plugin>
										<li>
											<a href="#s-plugin-${plugin}">${plugin}</a>
	
											<ul class="nav nav-stacked" style="margin-left: 10px">
												<#list getStepsWithPlugin(plugin) as step>
													<li>
														<a href="#step-${plugin}-${step.name}">${step.name}</a>
													</li>
												</#list>
												<#list getValidationsWithPlugin(plugin) as validator>
													<li>
														<a href="#validator-${plugin}-${validator.name}">${validator.name}</a>
													</li>
												</#list>
											</ul>
										</li>
									</#list>
								</ul>
							</li>
							
							<li>
								<a href="#fmarkerMethods">Free Marker Methods</a>
								
								<ul class="nav nav-stacked" style="margin-left: 10px">
									<#list freeMarkerMethods as fmarker>
										<li>
											<a href="#fmarker-${fmarker.name}">${fmarker.name}</a>
										</li>
									</#list>
								</ul>
							</li>
							
							<li>
								<a href="#parsers">Expression Types</a>
								
								<ul class="nav nav-stacked" style="margin-left: 10px">
									<#list parsers as parser>
										<li>
											<a href="#parser-${parser.name}">${parser.name}</a>
										</li>
									</#list>
								</ul>
							</li>
	
							<li>
								<a href="#uiLocators">UI Locators</a>
								
								<ul class="nav nav-stacked" style="margin-left: 10px">
									<#list uiLocators as locator>
										<li>
											<a href="#locator-${locator.name}">${locator.name}</a>
										</li>
									</#list>
								</ul>
							</li>
						</ul>
					</div>
				</div>
				
				
				<div class="col-md-9 col-lg-10">
					<div id="steps" class="dataSection1">
						<h1>Steps and Assertions</h1>
						<p>
							Steps and assertions are basic building blocks of autoX. From the basic language (like if, loop, functions etc) to complex/custom
							functionality everything is done using steps/assertions.<br/>
							<b>Step</b> is a simple tag, which helps in execution of some functionality.<br/>
							<b>Assertion</b> is similar to step, which apart from execution of some functionality it also validates the state of current execution.
						</p>
						
						<#list activePlugins as plugin>
							<div id="s-plugin-${plugin}" class="dataSection2">
								<h2>${plugin} related steps</h2>
								
								<#list getStepsWithPlugin(plugin) as step>
									<div id="step-${plugin}-${step.name}" class="dataSection3">
										<h3>Step ${step.name} - ${step.title}</h3>
										
										<@addContent step=step/>
									</div>
								</#list>

								<#list getValidationsWithPlugin(plugin) as validator>
									<div id="validator-${plugin}-${validator.name}" class="dataSection3">
										<h3>Assertion ${validator.name} - ${validator.title}</h3>
										
										<@addContent step=validator/>
									</div>
								</#list>
							</div>
						</#list>
					</div>

					<div id="fmarkerMethods" class="dataSection1">
						<h1>Free Marker Methods</h1>
						<p>Defines the steps of autox for all functionalities</p>
						
						<#list freeMarkerMethods as fmarker>
							<div id="fmarker-${fmarker.name}" class="dataSection2">
								<h2>Free Marker Method - ${fmarker.name}</h2>
								<@addDocumentation docInfo=fmarker/>
							</div>
						</#list>
					</div>
						
					<div id="parsers" class="dataSection1">
						<h1>Expression Types</h1>
						<p>Defines the steps of autox for all functionalities</p>
						
						<#list parsers as parser>
							<div id="parser-${parser.name}" class="dataSection2">
								<h2>Expression Type - ${parser.name}</h2>
								<@addDocumentation docInfo=parser/>
							</div>
						</#list>
					</div>

					<div id="uiLocators" class="dataSection1">
						<h1>UI Locators</h1>
						<p>Defines the steps of autox for all functionalities</p>
						
						<#list uiLocators as locator>
							<div id="locator-${locator.name}" class="dataSection2">
								<h2>Expression Type - ${locator.name}</h2>
								<@addDocumentation docInfo=locator/>
							</div>
						</#list>
					</div>
				</div>
			</div>
		</div>
	
	</body>
</html>

<#macro addContent step>
	<p>
		${step.description}
	</p>
	
	<table class="table table-striped table-hover table-bordered">
		<tr>
			<th colspan="3"  class="doc_mainHeading">
				Parameters
			</th>
		</tr>
		<tr>
			<th class="doc_heading"> Name </th>
			<th class="doc_heading"> Type </th>
			<th class="doc_heading"> Description </th>
		</tr>
		<#list step.params as param>
			<tr>
				<td>${param.name}</td>
				<td>${param.type}</td>
				<td>
					<#if param.sourceType == "CONDITION">
						<b><i>This is a "Condition" paramaeter. This is a freemarker expression that should result in boolean value.</i></b>
						<BR/>
					</#if>
					<#if param.sourceType == "EXPRESSION">
						<b><i>This is an <a href="#parsers">Expressions</a></i></b>
						<BR/>
					</#if>
					<#if param.sourceType == "EXPRESSION_PATH">
						<b><i>This is an expression-path. This is similar to <a href="#parsers">Expressions</a>, but are generally used to set the value at specified path.</i></b>
						<BR/>
					</#if>						
					<#if param.sourceType == "UI_LOCATOR">
						<b><i>This is a <a href="#uiLocators">UI locator param.</a></i></b>
						<BR/>
					</#if>						

					${param.description}
				</td>
			</tr>
		</#list>
		
		<#assign i = step.params?size>
		<#if i==0>
			<tr>
				<td colspan="3" style="font-weight: bold; ">
					<i>No parameters available.</i>
				</td>
			</tr>
		</#if>
	</table>
	
	<#if step.hasExamples()>
		<table class="table table-striped table-hover table-bordered">
			<tr>
				<th colspan="2"  class="doc_mainHeading">
					Examples
				</th>
			</tr>
			<#list step.examples as ex>
				<tr>
					<td class="doc_heading" style="width: 30px;"> ${ex?index + 1} </td>
					<td>
						${ex.description}<br/>

						<div style="margin-left: 20px; font-weight: bold; font-style: italic;">
							${ex.escapedContent}
						</div>
						
					</td>
				</tr>
			</#list>
		</table>
	</#if>
	
</#macro>

<#macro addDocumentation docInfo>
	<p>
		${docInfo.description}
	</p>
	
	<#if docInfo.hasParameters()>
		<table class="table table-striped table-hover table-bordered">
			<tr>
				<th colspan="3"  class="doc_mainHeading">
					Parameters
				</th>
			</tr>
			<tr>
				<th class="doc_heading"> Name </th>
				<th class="doc_heading"> Type </th>
				<th class="doc_heading"> Description </th>
			</tr>
			
			<#list docInfo.parameters as param>
				<tr>
					<td>${param.name}</td>
					<td>${param.type}</td>
					<td>
						${param.description}
					</td>
				</tr>
			</#list>
		</table>
	</#if>

	<#if docInfo.hasReturnInfo()>
		<table class="table table-striped table-hover table-bordered">
			<tr>
				<th colspan="4"  class="doc_mainHeading">
					Return Details
				</th>
			</tr>
			<tr>
				<th class="doc_heading"> Type </th>
				<td>${docInfo.returnType}</td>
				
				<th class="doc_heading"> Description </th>
				<td>${docInfo.returnDescription}</td>
			</tr>
		</table>
	</#if>

	<#if docInfo.hasExamples()>
		<table class="table table-striped table-hover table-bordered">
			<tr>
				<th colspan="2"  class="doc_mainHeading">
					Examples
				</th>
			</tr>
			<#list docInfo.examples as ex>
				<tr>
					<td class="doc_heading" style="width: 30px;"> ${ex?index + 1} </td>
					<td>
						${ex.description}<br/>

						<div style="margin-left: 20px; font-weight: bold; font-style: italic;">
							${ex.escapedContent}
						</div>
						
					</td>
				</tr>
			</#list>
		</table>
	</#if>
	
</#macro>
